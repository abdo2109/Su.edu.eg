import React, { useState } from 'react';
import { CheckCircle, XCircle, Trophy } from 'lucide-react';

const CyberSecurityQuiz = () => {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState({});
  const [showResult, setShowResult] = useState(false);

  const questions = [
    {
      id: 1,
      question: "Ù„Ù…Ø§ ØªØ´ÙˆÙ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ØŒ Ø£ÙˆÙ„ Ø­Ø§Ø¬Ø© ØªÙÙƒØ± ÙÙŠÙ‡Ø§:",
      options: [
        { text: "Ø¹Ø§ÙŠØ² Ø£ÙÙ‡Ù… Ø¥Ø²Ø§ÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø¨ÙŠØ´ØªØºÙ„ Ù…Ù† Ø¬ÙˆØ§Ù‡", value: "pwn" },
        { text: "Ø¹Ø§ÙŠØ² Ø£Ø®ØªØ±Ù‚ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ£ÙˆØµÙ„ Ù„Ù„Ø¯Ø§ØªØ§", value: "web" },
        { text: "Ø¹Ø§ÙŠØ² Ø£ÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ©", value: "crypto" },
        { text: "Ø¹Ø§ÙŠØ² Ø£Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£ÙˆÙ„", value: "osint" }
      ]
    },
    {
      id: 2,
      question: "Ù„Ùˆ Ù‚Ø¯Ø§Ù…Ùƒ Ù…Ø´ÙƒÙ„Ø© ØµØ¹Ø¨Ø© Ø¬Ø¯Ø§Ù‹:",
      options: [
        { text: "Ø£ÙØ¶Ù„ Ø£Ù‚Ø¹Ø¯ Ø³Ø§Ø¹Ø§Øª Ø£Ø­Ù„Ù‡Ø§ Ù„Ø­Ø¯ Ù…Ø§ ØªÙˆØµÙ„", value: "pwn" },
        { text: "Ø£Ø¬Ø±Ø¨ Ø­Ù„ÙˆÙ„ ÙƒØªÙŠØ± Ø¨Ø³Ø±Ø¹Ø© Ù„Ø­Ø¯ Ù…Ø§ Ø­Ø§Ø¬Ø© ØªÙ†Ø¬Ø­", value: "web" },
        { text: "Ø£Ø¨Ø­Ø« ÙˆØ£Ù‚Ø±Ø§ ÙƒØªÙŠØ± Ù‚Ø¨Ù„ Ù…Ø§ Ø£Ø¨Ø¯Ø£", value: "crypto" },
        { text: "Ø£Ø¯ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…Ø®ØªÙ„ÙØ©", value: "osint" }
      ]
    },
    {
      id: 3,
      question: "Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© Ø¨ØªØ­ÙØ²Ùƒ:",
      options: [
        { text: "Ø¥Ù†ÙŠ Ø£Ø¹Ù…Ù„ Ø­Ø§Ø¬Ø© Ù…Ø­Ø¯Ø´ Ù‚Ø¯Ø± ÙŠØ¹Ù…Ù„Ù‡Ø§", value: "pwn" },
        { text: "Ø¥Ù†ÙŠ Ø£Ø´ÙˆÙ Ù†ØªÙŠØ¬Ø© Ø³Ø±ÙŠØ¹Ø© ÙˆÙˆØ§Ø¶Ø­Ø©", value: "web" },
        { text: "Ø¥Ù†ÙŠ Ø£Ø­Ù„ Ù„ØºØ² Ù…Ø¹Ù‚Ø¯ Ø¬Ø¯Ø§Ù‹", value: "crypto" },
        { text: "Ø¥Ù†ÙŠ Ø£Ù„Ø§Ù‚ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù…Ø­Ø¯Ø´ Ù„Ø§Ù‚ÙŠÙ‡Ø§", value: "osint" }
      ]
    },
    {
      id: 4,
      question: "ÙÙŠ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø£Ùˆ Ø§Ù„Ø´ØºÙ„ØŒ Ø£Ù†Øª:",
      options: [
        { text: "Ø¨Ø­Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© (Assembly, Memory)", value: "pwn" },
        { text: "Ø¨Ø­Ø¨ Ø£Ø´ØªØºÙ„ Ø¹Ù„Ù‰ Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù‚Ø¹ÙŠØ© ÙˆÙ…ÙˆØ§Ù‚Ø¹", value: "web" },
        { text: "Ø¨Ø­Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØ§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª", value: "crypto" },
        { text: "Ø¨Ø­Ø¨ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª", value: "osint" }
      ]
    },
    {
      id: 5,
      question: "Ù„Ùˆ Ù‡ØªØ®ØªØ§Ø± Ø³Ù„Ø§Ø­ ÙÙŠ Ù„Ø¹Ø¨Ø©:",
      options: [
        { text: "Sniper Rifle - Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ© ÙˆØµØ¨Ø±", value: "pwn" },
        { text: "Assault Rifle - Ø³Ø±ÙŠØ¹ ÙˆÙ…ØªÙ†ÙˆØ¹", value: "web" },
        { text: "Puzzle Box - ÙŠØ­ØªØ§Ø¬ Ø°ÙƒØ§Ø¡", value: "crypto" },
        { text: "Drone/Radar - Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª", value: "osint" }
      ]
    },
    {
      id: 6,
      question: "ÙˆÙ‚Øª Ø§Ù„ÙØ±Ø§Øº Ø¨ØªÙØ¶Ù„:",
      options: [
        { text: "Ø£ØªØ¹Ù„Ù… Ø­Ø§Ø¬Ø© ØµØ¹Ø¨Ø© Ø¬Ø¯Ø§Ù‹ ÙˆÙ…Ø¹Ù‚Ø¯Ø©", value: "pwn" },
        { text: "Ø£Ø¬Ø±Ø¨ tools ÙˆØªÙ‚Ù†ÙŠØ§Øª Ø¬Ø¯ÙŠØ¯Ø©", value: "web" },
        { text: "Ø£Ø­Ù„ Ø£Ù„ØºØ§Ø² ÙˆÙ…Ø³Ø§Ø¦Ù„ Ø±ÙŠØ§Ø¶ÙŠØ©", value: "crypto" },
        { text: "Ø£ØªØµÙØ­ ÙˆØ£Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ù…ÙˆØ§Ø¶ÙŠØ¹ Ù…Ø®ØªÙ„ÙØ©", value: "osint" }
      ]
    },
    {
      id: 7,
      question: "ÙÙŠ CTFØŒ Ø£ÙˆÙ„ Ù‚Ø³Ù… ØªØ±ÙˆØ­Ù„Ù‡:",
      options: [
        { text: "Binary/Pwn - Ø§Ù„Ø£ØµØ¹Ø¨ ÙˆØ§Ù„Ø£Ù‚Ù„ Ø­Ù„", value: "pwn" },
        { text: "Web - ÙÙŠÙ‡ ØªØ­Ø¯ÙŠØ§Øª ÙƒØªÙŠØ±", value: "web" },
        { text: "Crypto - ÙŠØ­ØªØ§Ø¬ ØªÙÙƒÙŠØ±", value: "crypto" },
        { text: "OSINT - Ø¨Ø­Ø« ÙˆØªØ­Ù‚ÙŠÙ‚", value: "osint" }
      ]
    },
    {
      id: 8,
      question: "Ø¨ØªÙØ¶Ù„ ØªØ´ØªØºÙ„:",
      options: [
        { text: "Low-level (Assembly, Memory, Registers)", value: "pwn" },
        { text: "High-level (Python, JS, Applications)", value: "web" },
        { text: "Mathematical (Algorithms, Encryption)", value: "crypto" },
        { text: "Research (Google, Social Media, Data)", value: "osint" }
      ]
    },
    {
      id: 9,
      question: "Ø§Ù„Ù†Ø¬Ø§Ø­ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø§Ù„Ùƒ:",
      options: [
        { text: "Ù„Ù…Ø§ Ø£Ø¹Ù…Ù„ Ø­Ø§Ø¬Ø© ØµØ¹Ø¨Ø© Ù…Ø­Ø¯Ø´ Ø¹Ù…Ù„Ù‡Ø§", value: "pwn" },
        { text: "Ù„Ù…Ø§ Ø£Ø®ØªØ±Ù‚ ÙˆØ£ÙˆØµÙ„ Ù„Ù„Ù‡Ø¯Ù", value: "web" },
        { text: "Ù„Ù…Ø§ Ø£Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ù…Ø¹Ù‚Ø¯Ø©", value: "crypto" },
        { text: "Ù„Ù…Ø§ Ø£Ù„Ø§Ù‚ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù‚ÙŠÙ…Ø© ÙˆÙ…Ø®ÙÙŠØ©", value: "osint" }
      ]
    },
    {
      id: 10,
      question: "Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© Ø¨ØªØ¶Ø§ÙŠÙ‚Ùƒ:",
      options: [
        { text: "Ø¥Ù† Ø§Ù„Ø­Ø§Ø¬Ø© ØªÙƒÙˆÙ† Ø³Ù‡Ù„Ø© Ø£ÙˆÙŠ", value: "pwn" },
        { text: "Ø¥Ù† Ù…ÙÙŠØ´ Ù†ØªÙŠØ¬Ø© ÙˆØ§Ø¶Ø­Ø©", value: "web" },
        { text: "Ø¥Ù† Ø§Ù„Ø­Ù„ ÙŠÙƒÙˆÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ø´ Ù…Ù†Ø·Ù‚ÙŠ", value: "crypto" },
        { text: "Ø¥Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªÙƒÙˆÙ† Ù†Ø§Ù‚ØµØ©", value: "osint" }
      ]
    }
  ];

  const handleAnswer = (value) => {
    const newAnswers = { ...answers, [currentQuestion]: value };
    setAnswers(newAnswers);

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1);
    } else {
      setShowResult(true);
    }
  };

  const calculateResult = () => {
    const scores = { pwn: 0, web: 0, crypto: 0, osint: 0 };
    
    Object.values(answers).forEach(answer => {
      scores[answer]++;
    });

    const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
    
    return sortedScores;
  };

  const getFieldInfo = (field) => {
    const info = {
      pwn: {
        name: "Binary Exploitation / Pwn",
        emoji: "ðŸ’¥",
        description: "Ø£Ù†Øª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ØµØ¹Ø¨Ø©! Pwn Ù‡Ùˆ Ø§Ù„Ø£Ù‚ÙˆÙ‰ ÙˆØ§Ù„Ø£ØµØ¹Ø¨ ÙÙŠ Ø§Ù„Ø³ÙŠÙƒÙŠÙˆØ±ØªÙŠ.",
        skills: ["Assembly x86/x64", "Buffer Overflow", "ROP chains", "Heap Exploitation", "GDB/Pwndbg"],
        why: "Ø´Ø®ØµÙŠØªÙƒ ØªØ­Ø¨ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙˆØ§Ù„ØµØ¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©. Pwn Ù…Ø­ØªØ§Ø¬ ØµØ¨Ø± ÙˆØªØ±ÙƒÙŠØ² Ø¹Ø§Ù„ÙŠ.",
        color: "bg-red-500"
      },
      web: {
        name: "Web Application Security",
        emoji: "ðŸŒ",
        description: "Ø£Ù†Øª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù€ Web Hacking! Ù…Ø¬Ø§Ù„ ÙˆØ§Ø³Ø¹ ÙˆÙ…Ø·Ù„ÙˆØ¨ Ø¬Ø¯Ø§Ù‹.",
        skills: ["SQL Injection", "XSS", "CSRF", "SSRF", "Authentication Bypass", "Burp Suite"],
        why: "Ø´Ø®ØµÙŠØªÙƒ ØªØ­Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø±ÙŠØ¹Ø© ÙˆØ§Ù„ØªÙ†ÙˆØ¹. Web ÙÙŠÙ‡ ØªØ­Ø¯ÙŠØ§Øª ÙƒØªÙŠØ± ÙˆÙ…ØªÙ†ÙˆØ¹Ø©.",
        color: "bg-blue-500"
      },
      crypto: {
        name: "Cryptography",
        emoji: "ðŸ”",
        description: "Ø£Ù†Øª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù€ Cryptography! ÙŠØ­ØªØ§Ø¬ Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØªÙÙƒÙŠØ± Ù…Ù†Ø·Ù‚ÙŠ.",
        skills: ["RSA", "AES", "Hash Functions", "Classical Ciphers", "Python Crypto"],
        why: "Ø´Ø®ØµÙŠØªÙƒ ØªØ­Ø¨ Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© ÙˆØ§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙÙŠ Ø§Ù„Ø­Ù„ÙˆÙ„.",
        color: "bg-purple-500"
      },
      osint: {
        name: "Open Source Intelligence",
        emoji: "ðŸ”",
        description: "Ø£Ù†Øª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù€ OSINT! Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ.",
        skills: ["Google Dorking", "Social Media Analysis", "Metadata Analysis", "Geolocation"],
        why: "Ø´Ø®ØµÙŠØªÙƒ ØªØ­Ø¨ Ø§Ù„Ø¨Ø­Ø« ÙˆØ¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…Ø®ØªÙ„ÙØ©.",
        color: "bg-green-500"
      }
    };
    return info[field];
  };

  const resetQuiz = () => {
    setCurrentQuestion(0);
    setAnswers({});
    setShowResult(false);
  };

  if (showResult) {
    const results = calculateResult();
    const topField = results[0];
    const secondField = results[1];
    const fieldInfo = getFieldInfo(topField[0]);
    const secondInfo = getFieldInfo(secondField[0]);

    return (
      <div className="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 p-8">
        <div className="max-w-4xl mx-auto">
          <div className="bg-gray-800 rounded-lg shadow-2xl p-8 border border-purple-500">
            <div className="text-center mb-8">
              <Trophy className="w-20 h-20 text-yellow-500 mx-auto mb-4" />
              <h2 className="text-4xl font-bold text-white mb-2">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©! ðŸŽ¯</h2>
            </div>

            <div className={`${fieldInfo.color} rounded-lg p-6 mb-6 transform hover:scale-105 transition`}>
              <div className="text-center">
                <div className="text-6xl mb-4">{fieldInfo.emoji}</div>
                <h3 className="text-3xl font-bold text-white mb-2">{fieldInfo.name}</h3>
                <div className="text-white text-xl mb-4">Ø§Ù„Ù†Ø³Ø¨Ø©: {((topField[1] / 10) * 100).toFixed(0)}%</div>
              </div>
              
              <div className="bg-black bg-opacity-30 rounded p-4 mb-4">
                <p className="text-white text-lg mb-4">{fieldInfo.description}</p>
                <p className="text-gray-200 mb-4">
                  <strong>Ù„ÙŠÙ‡ Ù…Ù†Ø§Ø³Ø¨ Ù„ÙŠÙƒ:</strong> {fieldInfo.why}
                </p>
              </div>

              <div className="bg-black bg-opacity-30 rounded p-4">
                <h4 className="text-white font-bold text-xl mb-3">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù„ÙŠ Ù‡ØªØ­ØªØ§Ø¬Ù‡Ø§:</h4>
                <div className="grid grid-cols-2 gap-2">
                  {fieldInfo.skills.map((skill, idx) => (
                    <div key={idx} className="flex items-center text-white">
                      <CheckCircle className="w-5 h-5 mr-2 text-green-400" />
                      <span>{skill}</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {secondField[1] > 2 && (
              <div className="bg-gray-700 rounded-lg p-4 mb-6">
                <h4 className="text-white font-bold text-lg mb-2">Ù…Ø¬Ø§Ù„ ØªØ§Ù†ÙŠ Ù…Ù†Ø§Ø³Ø¨ Ù„ÙŠÙƒ:</h4>
                <div className="flex items-center">
                  <span className="text-3xl mr-3">{secondInfo.emoji}</span>
                  <div>
                    <p className="text-white font-semibold">{secondInfo.name}</p>
                    <p className="text-gray-300 text-sm">Ø§Ù„Ù†Ø³Ø¨Ø©: {((secondField[1] / 10) * 100).toFixed(0)}%</p>
                  </div>
                </div>
              </div>
            )}

            <div className="bg-gray-700 rounded-lg p-4 mb-6">
              <h4 className="text-white font-bold text-lg mb-3">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</h4>
              {results.map(([field, score]) => {
                const info = getFieldInfo(field);
                return (
                  <div key={field} className="flex items-center justify-between mb-2">
                    <div className="flex items-center">
                      <span className="text-2xl mr-2">{info.emoji}</span>
                      <span className="text-white">{info.name}</span>
                    </div>
                    <div className="flex items-center">
                      <div className="w-32 bg-gray-600 rounded-full h-3 mr-3">
                        <div 
                          className={`${info.color} h-3 rounded-full transition-all duration-500`}
                          style={{ width: `${(score / 10) * 100}%` }}
                        ></div>
                      </div>
                      <span className="text-white font-bold">{score}/10</span>
                    </div>
                  </div>
                );
              })}
            </div>

            <button
              onClick={resetQuiz}
              className="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition"
            >
              Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            </button>
          </div>
        </div>
      </div>
    );
  }

  const progress = ((currentQuestion + 1) / questions.length) * 100;

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 p-8">
      <div className="max-w-3xl mx-auto">
        <div className="bg-gray-800 rounded-lg shadow-2xl p-8 border border-blue-500">
          <div className="mb-6">
            <div className="flex justify-between text-white mb-2">
              <span className="font-bold">Ø§Ù„Ø³Ø¤Ø§Ù„ {currentQuestion + 1} Ù…Ù† {questions.length}</span>
              <span>{progress.toFixed(0)}%</span>
            </div>
            <div className="w-full bg-gray-700 rounded-full h-3">
              <div 
                className="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300"
                style={{ width: `${progress}%` }}
              ></div>
            </div>
          </div>

          <h2 className="text-2xl font-bold text-white mb-8 text-center">
            {questions[currentQuestion].question}
          </h2>

          <div className="space-y-4">
            {questions[currentQuestion].options.map((option, index) => (
              <button
                key={index}
                onClick={() => handleAnswer(option.value)}
                className="w-full text-right bg-gray-700 hover:bg-gradient-to-r hover:from-blue-600 hover:to-purple-600 text-white font-semibold py-4 px-6 rounded-lg transition transform hover:scale-105 shadow-lg"
              >
                <span className="text-lg">{option.text}</span>
              </button>
            ))}
          </div>

          <div className="mt-6 text-center text-gray-400 text-sm">
            Ø§Ø®ØªØ§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„ÙŠÙƒ
          </div>
        </div>
      </div>
    </div>
  );
};

export default CyberSecurityQuiz;
